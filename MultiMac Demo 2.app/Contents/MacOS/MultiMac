#!/bin/bash

# MultiMac Demo Launcher
APP_DIR="$(cd "$(dirname "$0")/../Resources" && pwd)"
cd "$APP_DIR"

# Check if venv exists, create if not
if [ ! -d "$APP_DIR/venv" ]; then
    echo "ðŸ”§ First-time setup..."
    
    # Find Python 3.11
    if [ -x "/opt/homebrew/bin/python3.11" ]; then
        PYTHON="/opt/homebrew/bin/python3.11"
    elif [ -x "/usr/local/bin/python3.11" ]; then
        PYTHON="/usr/local/bin/python3.11"
    elif command -v python3.11 &> /dev/null; then
        PYTHON="python3.11"
    else
        osascript -e 'display dialog "Python 3.11 required!\n\nInstall with:\nbrew install python@3.11" buttons {"OK"} default button 1 with icon stop'
        exit 1
    fi
    
    # Create venv
    "$PYTHON" -m venv "$APP_DIR/venv"
    source "$APP_DIR/venv/bin/activate"
    
    # Install dependencies
    pip install --upgrade pip -q
    pip install -r "$APP_DIR/requirements.txt" -q
else
    source "$APP_DIR/venv/bin/activate"
fi

# Launch app
cd "$APP_DIR"
python3 main.py

